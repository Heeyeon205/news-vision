<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>카테고리 목록</title>
    <style>
        * {box-sizing: border-box}
        body {font-family: "Lato", sans-serif;}

        .tab {
            float: left;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            width: 30%;
            height: 300px;
        }

        .tab button {
            display: block;
            background-color: inherit;
            color: black;
            padding: 22px 16px;
            width: 100%;
            border: none;
            outline: none;
            text-align: left;
            cursor: pointer;
            transition: 0.3s;
            font-size: 17px;
        }

        .tab button:hover { background-color: #ddd; }
        .tab button.active { background-color: #ccc; }

        .tabcontent {
            float: left;
            padding: 0px 12px;
            border: 1px solid #ccc;
            width: 70%;
            border-left: none;
            height: 300px;
            display: none;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #999;
            padding: 8px;
            text-align: center;
        }






        .toptab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
        }

        .toptab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        .toptab button:hover {
            background-color: #ddd;
        }

        .toptab button.active {
            background-color: #ccc;
        }

        .topcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }

    </style>
</head>
<body>
<h2>카테고리 목록</h2>
<div class="tab">
    <button class="tablinks" onclick="openTab(event, 'userlist')" id="defaultOpen">회원 관리</button>
    <button class="tablinks" onclick="openTab(event, 'newslist')">뉴스 관리</button>
    <button class="tablinks" onclick="openTab(event, 'boardlist')">게시판 관리</button>
    <button class="tablinks" onclick="openTab(event, 'categorylist')">카테고리 관리</button>
    <button class="tablinks" onclick="openTab(event, 'polllist')">투표 관리</button>
    <button class="tablinks" onclick="openTab(event, 'reportlist')">신고 관리</button>
</div>

<!-- 회원 관리-->
<div id="userlist" class="tabcontent">
    <h3>회원 관리</h3>
    <table id="userTable">
        <thead>
        <tr>

            <th>로그인 이메일</th>
            <th>비밀번호</th>
            <th>닉네임</th>
            <th>생성일</th>
            <th>프로필 이미지</th>
            <th>소개</th>

            <th>소셜 로그인 식별자</th>


            <th>삭제</th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const tbody = document.querySelector("#userTable tbody");

        fetch("http://localhost:8080/admin/users")
            .then(response => response.json())
            .then(data => {
                tbody.innerHTML = "";

                data.forEach(user => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${user.username}</td>
                        <td>${user.password}</td>
                        <td>${user.nickname}</td>
                        <td>${user.create_at}</td>
                        <td>${user.image}</td>
                        <td>${user.introduce}</td>
                        <td>${user.provider}</td>
                        <td>${user.provider_id}</td>
                        <td>${user.role}</td>
                      <td><button class="delete-user" data-id="${user.id || ''}">삭제</button></td>
                    `;
                    tbody.appendChild(row);
                });
                tbody.addEventListener('click', function(event) {
                    // 클릭된 요소가 'delete-user' 클래스를 가진 버튼인지 확인
                    if (event.target.classList.contains('delete-user')) {
                        const deleteButton = event.target;
                        const userId = deleteButton.getAttribute('data-id'); // 버튼에서 사용자 ID 가져오기

                        if (!userId) {
                            alert('삭제할 사용자 ID를 찾을 수 없습니다.');
                            return;
                        }

                        // 1. 로컬 스토리지에서 인증 토큰 가져오기 (키 이름 'authToken'은 예시)
                        const token = localStorage.getItem('authToken');

                        // 2. 토큰 존재 여부 확인
                        // if (!token) {
                        //     alert('삭제 권한이 없습니다. 로그인이 필요합니다.');
                        //     // 필요시 로그인 페이지로 리다이렉트
                        //     // window.location.href = '/login.html';
                        //     return;
                        // }

                        // 3. 사용자에게 삭제 재확인
                        if (confirm(`사용자 ID [${userId}] 를 정말 삭제하시겠습니까?`)) {
                            // 삭제 요청 중 버튼 비활성화
                            deleteButton.disabled = true;
                            deleteButton.textContent = '삭제 중...';

                            // 4. 삭제 API URL 생성
                            const deleteUrl = `http://localhost:8080/admin/${userId}`; // 예: http://localhost:8080/admin/5

                            // 5. fetch API로 DELETE 요청 보내기 (Authorization 헤더 포함)
                            fetch(deleteUrl, {
                                method: 'DELETE',
                                headers: {
                                    // 'Authorization' 헤더에 Bearer 토큰 추가
                                    'Authorization': `Bearer ${token}`
                                    // 다른 필요한 헤더가 있다면 추가 (보통 DELETE에는 Content-Type 불필요)
                                }
                            })
                                .then(response => {
                                    // 6. 응답 상태 확인
                                    if (response.status === 401) { // 인증 실패 (토큰 만료/잘못됨)
                                        throw new Error('인증 실패 (401): 토큰이 유효하지 않거나 로그인이 필요합니다.');
                                    }
                                    if (response.status === 403) { // 권한 없음
                                        throw new Error('권한 없음 (403): 이 사용자를 삭제할 권한이 없습니다.');
                                    }
                                    // 204 No Content 또는 200 OK 등 성공 상태 확인
                                    if (response.ok || response.status === 204) {
                                        // 성공 시: 테이블에서 해당 행(Row) 제거
                                        deleteButton.closest('tr').remove();
                                        alert('사용자가 성공적으로 삭제되었습니다.');
                                        // 테이블이 비었는지 확인 후 메시지 표시 (선택 사항)
                                        if (tbody.rows.length === 0) {
                                            const row = document.createElement("tr");
                                            row.innerHTML = `<td colspan="10" style="text-align: center;">표시할 사용자가 없습니다.</td>`;
                                            tbody.appendChild(row);
                                        }
                                    } else {
                                        // 그 외 서버 오류 (예: 500)
                                        // 서버에서 보낸 에러 메시지를 포함하도록 시도
                                        return response.text().then(text => {
                                            throw new Error(`삭제 실패 (${response.status}): ${text || response.statusText}`);
                                        });
                                    }
                                })
                                .catch(error => {
                                    // 7. 네트워크 오류 또는 위에서 발생시킨 에러 처리
                                    console.error('삭제 중 오류 발생:', error);
                                    alert(`오류 발생: ${error.message}`);
                                    // 실패 시 버튼 다시 활성화
                                    deleteButton.disabled = false;
                                    deleteButton.textContent = '삭제';
                                });
                        }
                    }
                });
            });
    });
</script>


<!-- 뉴스 관리-->
<div id="newslist" class="tabcontent">
    <h3>뉴스 관리</h3>
    <table id="newsTable">
        <thead>
        <tr>

            <th>제목</th>
            <th>내용</th>
            <th>카테고리 ID</th>
            <th>생성일</th>
            <th>조회수</th>
            <th>이미지</th>
            <th>작성자</th>
            <th>삭제</th>

        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>
<!-- 뉴스 관리 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("http://localhost:8080/admin/news")
            .then(response => {
                if (!response.ok) {
                    throw new Error("서버 오류 발생");
                }
                return response.json();
            }).then(data => {
            const tbody = document.querySelector("#newsTable tbody");
            tbody.innerHTML = "";

            data.forEach(news => {
                const row = document.createElement("tr");
                row.innerHTML = `
            <td>${news.title}</td>
            <td>${news.content}</td>
             <td>${news.category}</td>
            <td>${news.createdAt}</td>

            <td>${news.view}</td>
            <td>${news.image}</td>
            <td>${news.author}</td>
            <td><button>삭제</button></td>
        `;
                tbody.appendChild(row);
            });
        })

                .catch(error => {
                console.error("카테고리 불러오기 실패:", error);

            });
    });
</script>




<!-- 게시판 관리-->
<div id="boardlist" class="tabcontent">
    <h3>게시판 관리</h3>
    <table id="boardTable">
        <thead>
        <tr>
            <th>제목</th>
            <th>내용</th>
            <th>카테고리 ID</th>
            <th>생성일</th>
            <th>작성자</th>
            <th> 이미지</th>
            <th>조회수</th>
            <th>뉴스 아이디</th>

            <th> 신고 확인</th>
            <th>삭제</th>

        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div><script>
    document.addEventListener("DOMContentLoaded", function () {
        const tbody = document.querySelector("#boardTable tbody");
        const boardAdminApiUrl = "http://localhost:8080/admin/boards"; // API 엔드포인트

        // --- 수정: 토큰 키 상수는 더 이상 직접 사용되지 않음 ---
        // const AUTH_TOKEN_KEY = 'authToken';

        /**
         * 초기 게시글 목록 로드 함수
         * 주의: 목록 조회도 인증이 필요하다면 이 함수도 실패합니다.
         *       인증 없이 목록 조회가 가능하다고 가정합니다.
         */
        function loadBoardList() {
            // --- 수정: 토큰 및 Authorization 헤더 관련 로직 제거 ---
            fetch(boardAdminApiUrl) // 헤더 없이 요청
                .then(response => {
                    if (!response.ok) {
                        // 인증/권한 오류가 여기서도 발생할 수 있음 (SecurityConfig 설정에 따라)
                        if (response.status === 401 || response.status === 403) {
                            // 목록 조회 실패 시 사용자에게 알림
                            tbody.innerHTML = `<tr><td colspan="10" style="text-align: center; color: orange;">게시글 목록을 조회할 권한이 없습니다.</td></tr>`;
                            throw new Error(`인증/권한 오류 (${response.status})`); // 에러 발생시켜 catch로 이동
                        }
                        return response.text().then(text => { throw new Error(`서버 응답 오류 (${response.status}): ${text || '내용 없음'}`) });
                    }
                    if (response.status === 204) return [];
                    return response.json();
                })
                .then(data => {
                    renderTable(data); // 테이블 렌더링
                })
                .catch(error => {
                    console.error("게시글 목록 불러오기 실패:", error);
                    // 오류 메시지를 테이블에 표시 (renderTable 함수 호출 안 함)
                    if (!tbody.innerHTML.includes('오류 발생')) { // 중복 메시지 방지
                        tbody.innerHTML = `<tr><td colspan="10" style="text-align: center; color: red;">게시글 목록 로딩 오류: ${error.message}</td></tr>`;
                    }
                });
        }

        /**
         * 받아온 데이터로 테이블 내용을 채우는 함수
         */
        function renderTable(data) {
            tbody.innerHTML = ""; // 기존 내용 비우기

            if (!data || data.length === 0) {
                tbody.innerHTML = `<tr><td colspan="10" style="text-align: center;">표시할 게시글이 없습니다.</td></tr>`;
                return;
            }

            data.forEach(board => {
                const row = document.createElement("tr");
                const boardId = board.id;
                const userId = board.userId; // 작성자 ID (표시 및 파라미터용)

                // ID 유효성 경고 (이전과 동일)
                if (typeof boardId === 'undefined' || boardId === null || String(boardId).trim() === '') { console.warn('렌더링 경고: 게시글 ID 유효하지 않음', board); }
                if (typeof userId === 'undefined' || userId === null || String(userId).trim() === '') { console.warn('렌더링 경고: 작성자 ID 유효하지 않음', board); }

                const createdAt = board.createdAt ? new Date(board.createdAt).toLocaleString() : 'N/A';
                const isReportedText = typeof board.isReported !== 'undefined' ? (board.isReported ? 'Yes' : 'No') : 'N/A';

                row.innerHTML = `
                    <td>${board.title || 'N/A'}</td>
                    <td>${board.content || 'N/A'}</td>
                    <td>${board.categoryId || 'N/A'}</td>
                    <td>${createdAt}</td>
                    <td>${userId || 'N/A'}</td>
                    <td>${board.image || 'N/A'}</td>
                    <td>${board.view || 0}</td>
                    <td>${board.newsId || 'N/A'}</td>
                    <td>${isReportedText}</td>
                    <td>

                        <button class="delete-board"
                                data-board-id="${boardId || ''}"
                                data-user-id="${userId || ''}">삭제</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        /**
         * 삭제 버튼 클릭 처리 함수 (토큰 관련 로직 제거)
         */
        function handleDeleteClick(event) {
            if (!event.target.classList.contains('delete-board')) {
                return;
            }

            const deleteButton = event.target;
            const boardId = deleteButton.getAttribute('data-board-id');
            // --- userId는 URL 파라미터를 위해 계속 필요 ---
            const userIdFromData = deleteButton.getAttribute('data-user-id');
            console.log("삭제 버튼 클릭됨 (No Auth) - Board ID:", boardId, "User ID from data:", userIdFromData);

            // ID 유효성 검사 (이전과 동일)
            // const isValidBoardId = boardId && (boardId).trim() !== '';
            // const isValidUserId = userIdFromData && String(userIdFromData).trim() !== '';
            // if (!isValidBoardId) { alert('삭제할 게시글 ID가 올바르지 않습니다.'); return; }
            // if (!isValidUserId) { alert('작성자 ID가 올바르지 않아 삭제 요청을 보낼 수 없습니다.'); return; }

            // --- 수정: 토큰 가져오기 및 확인 로직 제거 ---
            // const token = localStorage.getItem(AUTH_TOKEN_KEY);
            // if (!token) { ... }

            if (confirm(`게시글 ID [${boardId}}] 를 정말 삭제하시겠습니까? (인증 없이 진행)`)) {
                deleteButton.disabled = true;
                deleteButton.textContent = '삭제 중...';

                // --- 삭제 URL 생성 (userId 파라미터 포함 유지) ---
                const deleteUrl = `${boardAdminApiUrl}/${(boardId).trim()}?userId=${(userIdFromData).trim()}`;
                logRequestDetails(deleteUrl); // 토큰 없이 로깅

                // --- 수정: fetch 요청 시 headers 제거 ---
                fetch(deleteUrl, {
                    method: 'DELETE'
                    // headers: { 'Authorization': `Bearer ${token}` } // 헤더 제거
                })
                    .then(response => {
                        // 응답 처리 로직 (이전과 동일, 401 에러는 이제 SecurityConfig에서 permitAll 안하면 발생)
                        if (response.ok || response.status === 204) {
                            deleteButton.closest('tr').remove();
                            alert(`게시글 ID [${boardId}] 가 삭제되었습니다.`);
                            if (tbody.rows.length === 0) { renderTable(null); }
                            return;
                        }
                        // 실패 응답 처리 (403 가능성 매우 높음)
                        return response.text().then(text => {
                            console.error(`Delete failed (No Auth) - Status: ${response.status}, Response:`, text);
                            let errorMsg = `삭제 실패 (${response.status})`;
                            try {
                                const errData = JSON.parse(text);
                                if (errData && errData.message) errorMsg += `: ${errData.message}`;
                                else if (text) errorMsg += `: ${text}`;
                            } catch (e) {
                                if (text) errorMsg += `: ${text}`;
                                else {
                                    // 403 에러 메시지 명시
                                    if (response.status === 403) errorMsg = '권한 없음 (403): 서버에서 권한 검증 실패';
                                    else if (response.status === 404) errorMsg = '찾을 수 없음 (404)';
                                    else if (response.status === 409) errorMsg = '충돌 (409)';
                                    else errorMsg = `서버 오류 (${response.status})`;
                                }
                            }
                            throw new Error(errorMsg);
                        });
                    })
                    .catch(error => {
                        console.error(`게시글 ID [${boardId}] 삭제 중 최종 오류 (No Auth):`, error);
                        alert(`오류 발생: ${error.message}`);
                    })
                    .finally(() => {
                        if (document.body.contains(deleteButton)) {
                            deleteButton.disabled = false;
                            deleteButton.textContent = '삭제';
                        }
                    });
            }
        }

        /**
         * 디버깅용 요청 정보 로깅 함수 (토큰 파라미터 제거)
         */
        function logRequestDetails(url) {
            console.log("--- Sending DELETE Request (No Auth) ---");
            console.log("URL:", url);
            console.log("Method: DELETE");
            // console.log("Authorization Header: Not Sent"); // 헤더 안 보냄
            console.log("-----------------------------");
        }

        // --- 초기화 실행 ---
        loadBoardList();
        tbody.addEventListener('click', handleDeleteClick);
    });
</script>


<!-- 카테고리 관리 -->
<div id="categorylist" class="tabcontent">
    <h3>카테고리 관리</h3>
    <input id="categoryNameInput" placeholder="새 카테고리 이름">
    <button id="addCategoryButton">추가</button>
    <table id="categoryTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>이름</th>
            <th>삭제</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
<!-- 카테고리 관리 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const tbody = document.querySelector("#categoryTable tbody");
        const nameInput = document.querySelector("#categoryNameInput");
        const addButton = document.querySelector("#addCategoryButton");
        const categoryApiUrl = "http://localhost:8080/admin/categories";

        function addCategoryToTable(category) {
            if (!category || typeof category.id === 'undefined' || typeof category.name === 'undefined') {
                console.error("Invalid category data provided to addCategoryToTable:", category);
                return; // Don't add if data is invalid
            }
            const row = document.createElement("tr");

            row.setAttribute('data-row-id', category.id);
            row.innerHTML = `
                <td>${category.id}</td>
                <td>${category.name}</td>
                <td><button class="delete-category" data-id="${category.id}">삭제</button></td>
            `;
            tbody.appendChild(row);
        }

        function fetchAndRenderCategories() {
            fetch(categoryApiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`서버 오류 발생: ${response.status} ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    tbody.innerHTML = ""; // Clear existing rows

                    if (!data || data.length === 0) {
                        const row = document.createElement("tr");
                        row.innerHTML = `<td colspan="3" style="text-align: center;">표시할 카테고리가 없습니다.</td>`;
                        tbody.appendChild(row);
                        return;
                    }

                    data.forEach(category => {
                        addCategoryToTable(category);
                    });
                })
                .catch(error => {
                    console.error("카테고리 불러오기 실패:", error);
                    tbody.innerHTML = "";
                    const row = document.createElement("tr");
                    row.innerHTML = `<td colspan="3" style="text-align: center; color: red;">카테고리 목록 로딩 중 오류: ${error.message}</td>`;
                    tbody.appendChild(row);
                });
        }

        fetchAndRenderCategories();

        addButton.addEventListener("click", function() {
            const categoryName = nameInput.value.trim();

            if (!categoryName) {
                alert("카테고리 이름을 입력해주세요.");
                nameInput.focus();
                return;
            }

            addButton.disabled = true;
            addButton.textContent = '추가 중...';

            fetch(categoryApiUrl, {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name: categoryName })
            })
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => {
                            throw new Error(`추가 실패: ${response.status} ${response.statusText} - ${text || '서버 응답 없음'}`);
                        });
                    }
                    // No need to parse response JSON if we're refreshing the list
                    return response;
                })
                .then(() => {
                    nameInput.value = "";
                    alert("카테고리가 성공적으로 추가되었습니다.");
                    // Refresh the entire category list
                    fetchAndRenderCategories();
                })
                .catch(error => {
                    console.error("카테고리 추가 오류:", error);
                    alert(`카테고리 추가 중 오류가 발생했습니다: ${error.message}`);
                })
                .finally(() => {
                    addButton.disabled = false;
                    addButton.textContent = '추가';
                });
        });

        tbody.addEventListener('click', function(event) {
            if (event.target.classList.contains('delete-category')) {
                const deleteButton = event.target;
                const categoryId = deleteButton.getAttribute('data-id');

                if (!categoryId) {
                    console.error("Delete button clicked, but data-id attribute is missing or invalid.");
                    alert("삭제할 카테고리 ID를 찾을 수 없습니다.");
                    return;
                }

                if (confirm(`카테고리 ID [${categoryId}] 를 정말 삭제하시겠습니까?`)) {
                    // Disable button during request
                    deleteButton.disabled = true;
                    deleteButton.textContent = '삭제 중...';

                    fetch(`${categoryApiUrl}/${categoryId}`, {
                        method: 'DELETE',
                    })
                        .then(response => {
                            if (response.ok || response.status === 204) {
                                // Remove the table row visually
                                deleteButton.closest('tr').remove();
                                alert('카테고리가 삭제되었습니다.');

                                if (tbody.rows.length === 0) {
                                    const row = document.createElement("tr");
                                    row.innerHTML = `<td colspan="3" style="text-align: center;">표시할 카테고리가 없습니다.</td>`;
                                    tbody.appendChild(row);
                                }
                            } else {
                                // Try get error details from response
                                return response.text().then(text => {
                                    throw new Error(`삭제 실패: ${response.status} ${response.statusText} - ${text || '서버 응답 없음'}`);
                                });
                            }
                        })
                        .catch(error => {
                            console.error('카테고리 삭제 오류:', error);
                            alert(`카테고리 삭제 중 오류 발생: ${error.message}`);
                            // Re-enable button on failure
                            deleteButton.disabled = false;
                            deleteButton.textContent = '삭제';
                        });
                }
            }
        });
    });
</script>

<!-- 카테고리 관리 -->
<div id="polllist" class="tabcontent">
    <h3>투표 관리</h3>
    <table id="pollTable">

        <thead>
        <tr>
            <th>제목</th>
            <th>내용</th>
            <th>생성일</th>
            <th>종료일</th>
            <th>작성자</th>
            <th>수정</th>
            <th>삭제</th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>
<!-- 투표 관리 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("http://localhost:8080/admin/polls")
            .then(response => {
                if (!response.ok) {
                    throw new Error("서버 오류 발생");
                }
                return response.json();
            })
            .then(data => {

                const tbody = document.querySelector("#pollTable tbody");
                tbody.innerHTML = "";

                data.forEach(poll => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
            <td>${poll.title}</td>
            <td>${poll.content}</td>
            <td>${poll.createdAt}</td>
              <td>${poll.expiredAt}</td>
                <td>${poll.authorNickname}</td>

            <td><button>수정</button></td>
             <td><button>삭제</button></td>

        `;
                    tbody.appendChild(row);
                });
            })
            .catch(error => {
                console.error("카테고리 불러오기 실패:", error);

            });
    });
</script>



<!-- 신고 관리 -->
<div id="reportlist" class="tabcontent">
    <h3>신고 관리</h3>
    <div class="toptab">
        <button class="toptablinks" id="defaultToptabOpen" onclick="openToptab(event, 'boardreport')">게시판 신고관리</button>
        <button class="toptablinks" onclick="openToptab(event, 'commentreport')">댓글 신고관리</button>
    </div>

    <div id="boardreport" class="toptabcontent">
        <table id="boardreportTable">

            <thead>
            <tr>


                <th>ID</th>
                <th>회원 아이디</th>
                <th>커뮤니티 아이디</th>

                <th>승인</th>
                <th>거절</th>
            </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch("http://localhost:8080/admin/boardreports")
                .then(response => {
                    if (!response.ok) {
                        throw new Error("서버 오류 발생");
                    }
                    return response.json();
                })
                .then(data => {

                    const tbody = document.querySelector("#boardreportTable tbody");
                    tbody.innerHTML = "";

                    data.forEach(boardreport => {
                        const row = document.createElement("tr");
                        row.innerHTML = `
            <td>${boardreport.id}</td>
            <td>${boardreport.user}</td>
            <td>${boardreport.board}</td>

            <td><button>수정</button></td>
             <td><button>삭제</button></td>

        `;
                        tbody.appendChild(row);
                    });
                })
                .catch(error => {
                    console.error("카테고리 불러오기 실패:", error);

                });
        });
    </script>
    <div id="commentreport" class="toptabcontent">
        <table id="commentreportTable">

            <thead>
            <tr>

                <th>ID</th>
                <th>댓글 아이디</th>
                <th>회원 아이디</th>

                <th>수정</th>
                <th>삭제</th>
            </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("http://localhost:8080/admin/commentreports")
            .then(response => {
                if (!response.ok) {
                    throw new Error("서버 오류 발생");
                }
                return response.json();
            })
            .then(data => {

                const tbody = document.querySelector("#commentreportTable tbody");
                tbody.innerHTML = "";

                data.forEach(commentreport => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
            <td>${commentreport.id}</td>
            <td>${commentreport.commentContent}</td>
            <td>${commentreport.reporterNickname}</td>

            <td><button>수정</button></td>
             <td><button>삭제</button></td>

        `;
                    tbody.appendChild(row);
                });
            })
            .catch(error => {
                console.error("카테고리 불러오기 실패:", error);

            });
    });
</script>





</body>
</html>

<script>
    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) tabcontent[i].style.display = "none";
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) tablinks[i].className = tablinks[i].className.replace(" active", "");
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }
    document.getElementById("defaultOpen").click();
</script>




<script>
    function openToptab(evt, tabName) {
        const contents = document.getElementsByClassName("toptabcontent");
        for (let i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
        }

        const links = document.getElementsByClassName("toptablinks");
        for (let i = 0; i < links.length; i++) {
            links[i].classList.remove("active");
        }

        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.classList.add("active");
    }

    window.onload = function () {
        document.getElementById("defaultToptabOpen").click();
    }
</script>